[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Intro to the workshop",
    "section": "",
    "text": "This website provides the supporting material for the Workshop “A crash course on urban accessibility with R”. The Workshop will be conducted during the 2024 WSTLUR (World Symposium on Transport and Land Use Research), which will be hosted by the Universidad de Los Andes, in Bogota, Colombia. The workshop is sponsored by the World Society Transport and Land Use Research (WSTLUR).\n\n\n\n\n\n\n\nWorkshop Summary:\nRouting and accessibility analyses are increasingly used in urban and transport research and planning. In this workshop, you will learn how to estimate travel time matrices and perform accessibility analyzes in multimodal transport networks using the {r5r} and {accessibility} packages in the R programming language.\nThe workshop will also illustrate how to calculate different measures of inequality of access to opportunities and accessibility poverty, which are crucial to assess the accessibility impacts of transportation projects from a transportation equity perspective. The course is based on the book “Introduction to urban accessibility: a practical guide with R”.\n\n\n\n\n\n\n\n\n\n\n\n\n\nHere are a few introductory slides explaining we will cover and what we do not cover in this workshop:\n\n\n\n\n\n\n\n\n\nThis workshop assumes the attendee has a basic knowledge of the R programming language. If you want to familiarize yourself with it, we recommend the books below:\n\nR for Data Science\nGeocomputation with R\nData Science in R (in Portuguese)\n\n\n\n\n\n\nReading material:\nExtra reading material relevant (but not required) for the workshop.\n\nOnline book “Introduction to urban accessibility a practical guide with R” (Chapters 3 and 6).\nThe {accessibility} package website and documentation.\nThe {r5r} package website and documentation.\nPaper of the {r5r} package, by Pereira et al. (2021).\nPaper on transportation equity measures, by Karner, Pereira, and Farber (2024).\nTransport Access Manual, by Levinson and King (2020).\n\n\n\nAbout the instructor:\nRafael H. M. Pereira  Head of Data Science  Institute for Applied Economic Research (Ipea), Brazil  Website | Google Scholar | Twitter | Linkedin |\nShort bio of the instructor:\nRafael H. M. Pereira is a senior researcher in the fields of urban analytics, spatial data science and transport studies at the Institute for Applied Economic Research (Ipea), Brazil. His research looks broadly at how urban policies and technologies shape the spatial organization of cities, human mobility as well as their impacts on social and health inequalities. Some of his key contributions to the fields of urban analytics and planning involve the development of new methods and open-source computational tools to the study of urban systems and transportation networks. These contributions emerge from substantive interests around social justice and sustainability issues in urban development, with particular focus on transportation equity and inequalities in access to opportunities, and the environmental impacts of built environments and mobility patterns. With a background in Sociology and Demography, Dr. Pereira obtained his PhD in Geography from the Transport Studies Unit at Oxford University.\n\n\n\n\nReferences\n\nKarner, Alex, Rafael H. M. Pereira, and Steven Farber. 2024. “Advances and Pitfalls in Measuring Transportation Equity.” Transportation, January. https://doi.org/10.1007/s11116-023-10460-7.\n\n\nLevinson, David, and David King. 2020. Transport Access Manual: A Guide for Measuring Connection Between People and Places. Committee of the Transport Access Manual, University of Sydney. https://ses.library.usyd.edu.au/handle/2123/23733.\n\n\nPereira, Rafael H. M., Marcus Saraiva, Daniel Herszenhut, Carlos Kaue Vieira Braga, and Matthew Wigginton Conway. 2021. “R5r: Rapid Realistic Routing on Multimodal Transport Networks with R5 in R.” Transport Findings, March, 21262. https://doi.org/10.32866/001c.21262.",
    "crumbs": [
      "Intro to the workshop"
    ]
  },
  {
    "objectID": "2_part.html",
    "href": "2_part.html",
    "title": "access_workshop_WSTLUR_2024",
    "section": "",
    "text": "test parte2\n\n# allocating memory to java\noptions(java.parameters = \"-Xmx6G\")\n\nlibrary(r5r)\n\nPlease make sure you have already allocated some memory to Java by running:\n  options(java.parameters = '-Xmx2G').\nYou should replace '2G' by the amount of memory you'll require. Currently, Java memory is set to -Xmx6G\n\nlibrary(accessibility)\nlibrary(ggplot2)\n\n\nAccessibility inequality & poverty ——————————————-\n\n# get data\n\nlibrary(accessibility)\n\n# path to data\ndata_dir &lt;- system.file(\"extdata\", package = \"accessibility\")\n\ntravel_matrix &lt;- readRDS(file.path(data_dir, \"travel_matrix.rds\"))\nland_use_data &lt;- readRDS(file.path(data_dir, \"land_use_data.rds\"))\n\n\n# calculate access\naccess &lt;- cumulative_cutoff(  travel_matrix,\n                              land_use_data,\n                              opportunity = \"jobs\",\n                              travel_cost = \"travel_time\",\n                              cutoff = 30\n                            )\n\nhead(access)\n\n                id  jobs\n            &lt;char&gt; &lt;int&gt;\n1: 89a881a5a2bffff 14561\n2: 89a881a5a2fffff 29452\n3: 89a881a5a67ffff 16647\n4: 89a881a5a6bffff 10700\n5: 89a881a5a6fffff  6669\n6: 89a881a5b03ffff 37029\n\n\n\n\nAccessibility inequality ——————————————-\n\n#\n# Palma = (avereage) Top 10%  / botton 40%\n\npalma &lt;- palma_ratio(\n                      accessibility_data = access,\n                      sociodemographic_data = land_use_data,\n                      opportunity = \"jobs\",\n                      population = \"population\",\n                      income = \"income_per_capita\"\n                    )\n\npalma\n\n   palma_ratio\n         &lt;num&gt;\n1:    3.800465\n\n# concentration index\n\nci &lt;- accessibility::gini_index(\n                          accessibility_data = access,\n                          sociodemographic_data = land_use_data,\n                          opportunity = \"jobs\",\n                          population = \"population\"\n                          #,\n                         # income = \"income_per_capita\"\n                          # , type = \"corrected\"\n                        )\n\nci\n\n   gini_index\n        &lt;num&gt;\n1:  0.4715251\n\n\n\n\nAccessibility poverty ——————————————-\n\npoverty &lt;- fgt_poverty(\n                          accessibility_data =  access,\n                          sociodemographic_data = land_use_data,\n                          opportunity = \"jobs\",\n                          population = \"population\",\n                          poverty_line = 100000\n                        )\n\n\npoverty\n\n        FGT0      FGT1      FGT2\n       &lt;num&gt;     &lt;num&gt;     &lt;num&gt;\n1: 0.5855476 0.3394363 0.2319952\n\n\n\n\ninterpretation\n#’ FGT0: 54% of the pop in poverty #’ FGT1: the accessibility of the poor is on average 33% lower than the poverty line #’ FGT2:"
  },
  {
    "objectID": "1_part.html",
    "href": "1_part.html",
    "title": "access_workshop_WSTLUR_2024",
    "section": "",
    "text": "test parte1\n\n# allocating memory to java\noptions(java.parameters = \"-Xmx6G\")\n\nlibrary(r5r)\n\nPlease make sure you have already allocated some memory to Java by running:\n  options(java.parameters = '-Xmx2G').\nYou should replace '2G' by the amount of memory you'll require. Currently, Java memory is set to -Xmx6G\n\nlibrary(accessibility)\nlibrary(sf)\n\nWarning: package 'sf' was built under R version 4.3.3\n\n\nLinking to GEOS 3.11.2, GDAL 3.8.2, PROJ 9.3.1; sf_use_s2() is TRUE\n\nlibrary(data.table)\nlibrary(ggplot2)\nlibrary(h3jsr)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:data.table':\n\n    between, first, last\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(mapview)\n\ndir\n\n# dir with data\ndata_path &lt;- system.file(\"extdata/poa\", package = \"r5r\")\n\n# data_path &lt;- 'C:://user/my_data'\n\nlist.files(data_path)\n\n [1] \"fares\"                      \"network.dat\"               \n [3] \"network_settings.json\"      \"poa_elevation.tif\"         \n [5] \"poa_eptc.zip\"               \"poa_hexgrid.csv\"           \n [7] \"poa_osm.pbf\"                \"poa_osm.pbf.mapdb\"         \n [9] \"poa_osm.pbf.mapdb.p\"        \"poa_points_of_interest.csv\"\n[11] \"poa_trensurb.zip\"          \n\nbrowseURL(data_path)\n\n\nbuild network ————————————————————–\n\nr5r_core &lt;- setup_r5(data_path)\n\nUsing cached R5 version from C:\\Users\\user\\AppData\\Local/R/cache/R/r5r/r5_jar_v7.1.0/r5-v7.1-all.jar\n\n\n\nUsing cached network.dat from R:/Dropbox/git/access_workshop_WSTLUR_2024/renv/library/R-4.3/x86_64-w64-mingw32/r5r/extdata/poa/network.dat\n\nr5r_core\n\n[1] \"Java-Object{org.ipea.r5r.R5RCore@2a8448fa}\"\n\n\n\n\nexplore data ————————————————————–\n\n# read all points in the city\npoints &lt;- fread(file.path(data_path, \"poa_hexgrid.csv\"))\n\nhead(points)\n\n                id       lon       lat population schools  jobs healthcare\n            &lt;char&gt;     &lt;num&gt;     &lt;num&gt;      &lt;int&gt;   &lt;int&gt; &lt;int&gt;      &lt;int&gt;\n1: 89a901291abffff -51.15825 -30.05385          0       0  1214          0\n2: 89a9012a3cfffff -51.21187 -30.10058        159       0     0          0\n3: 89a901295b7ffff -51.16521 -30.07544       1008       0     3          1\n4: 89a901284a3ffff -51.20535 -30.09005         92       0     0          0\n5: 89a9012809bffff -51.19575 -30.07839        577       0     9          0\n6: 89a901285cfffff -51.21108 -30.08124       1170       0   427          0\n\n# retrieve polygons of H3 spatial grid\ngrid &lt;- h3jsr::cell_to_polygon(points$id, simple = FALSE)\n\nhead(grid)\n\nSimple feature collection with 6 features and 1 field\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: -51.21389 ymin: -30.10204 xmax: -51.15622 ymax: -30.05238\nGeodetic CRS:  WGS 84\n       h3_address                       geometry\n1 89a901291abffff POLYGON ((-51.15729 -30.055...\n2 89a9012a3cfffff POLYGON ((-51.21091 -30.102...\n3 89a901295b7ffff POLYGON ((-51.16425 -30.076...\n4 89a901284a3ffff POLYGON ((-51.2044 -30.0915...\n5 89a9012809bffff POLYGON ((-51.1948 -30.0798...\n6 89a901285cfffff POLYGON ((-51.21013 -30.082...\n\n# merge land use data with spatial grid\ngrid_poa &lt;- dplyr::left_join(grid, \n                             points, \n                             by = c('h3_address'='id'))\n\n\n\n# interactive map\nmapview(grid_poa, zcol = 'jobs')\n\n\n\n\n\n\n\nAccess: quick and easy —————————————————–\n\n# routing inputs\nmode &lt;- c(\"walk\", \"transit\")\nmax_walk_time &lt;- 30      # in minutes\ntravel_time_cutoff &lt;- 20 # in minutes\ntime_window &lt;- 30        # in minutes\ndeparture_datetime &lt;- as.POSIXct(\"13-05-2019 14:00:00\",\n                                 format = \"%d-%m-%Y %H:%M:%S\")\n\n\n\n\n\n# calculate accessibility\naccess1 &lt;- r5r::accessibility(r5r_core,\n                              origins = points,\n                              destinations = points, \n                              mode = mode,\n                              opportunities_colnames = c(\"jobs\", \"schools\"),\n                              decay_function = \"step\",\n                              cutoffs = travel_time_cutoff,\n                              departure_datetime = departure_datetime,\n                              max_walk_time = max_walk_time,\n                              time_window = time_window,\n\n                              progress = TRUE\n                              )\n\nhead(access1)\n\n                id opportunity percentile cutoff accessibility\n            &lt;char&gt;      &lt;char&gt;      &lt;int&gt;  &lt;int&gt;         &lt;num&gt;\n1: 89a901291abffff        jobs         50     20          5958\n2: 89a901291abffff     schools         50     20             3\n3: 89a9012a3cfffff        jobs         50     20           432\n4: 89a9012a3cfffff     schools         50     20             0\n5: 89a901295b7ffff        jobs         50     20           665\n6: 89a901295b7ffff     schools         50     20             6"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "A crash course on urban accessibility with R\nmobilidade (Banister 2011; vasconcellos2018urban?; Levinson and King 2020). Ainda hoje, o foco na mobilidade motiva políticas que priorizam a circulação de automóveis e visam aumentar a velocidade e a fluidez de trânsito para reduzir congestionamentos e, consequentemente, tempos de deslocamento (Levine, Grengs, and Merlin 2019). Essas políticas, no entanto, tendem a dar um enfoque quantitativo na mobilidade: aumentar o número de viagens, aumentar a velocidade média, diminuir o tempo de congestionamento etc.\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n\n\nReferences\n\nBanister, David. 2011. “The Trilogy of Distance, Speed and Time.” Journal of Transport Geography 19 (4): 950–59. https://doi.org/10.1016/j.jtrangeo.2010.12.004.\n\n\nLevine, Jonathan, Joe Grengs, and Louis A. Merlin. 2019. From Mobility to Accessibility: Transforming Urban Transportation and Land-Use Planning. Cornell University Press.\n\n\nLevinson, David, and David King. 2020. Transport Access Manual: A Guide for Measuring Connection Between People and Places. Committee of the Transport Access Manual, University of Sydney."
  },
  {
    "objectID": "4_equity_measures.html",
    "href": "4_equity_measures.html",
    "title": "access_workshop_WSTLUR_2024",
    "section": "",
    "text": "test parte2\n\n\nPlease make sure you have already allocated some memory to Java by running:\n  options(java.parameters = '-Xmx2G').\nYou should replace '2G' by the amount of memory you'll require. Currently, Java memory is set to -Xmx6G\n\n\n\nAccessibility inequality & poverty ——————————————-\n\n\n                id  jobs\n            &lt;char&gt; &lt;int&gt;\n1: 89a881a5a2bffff 14561\n2: 89a881a5a2fffff 29452\n3: 89a881a5a67ffff 16647\n4: 89a881a5a6bffff 10700\n5: 89a881a5a6fffff  6669\n6: 89a881a5b03ffff 37029\n\n\n\n\nAccessibility inequality ——————————————-\n\n\n   palma_ratio\n         &lt;num&gt;\n1:    3.800465\n\n\n   gini_index\n        &lt;num&gt;\n1:  0.4715251\n\n\n\n\nAccessibility poverty ——————————————-\n\n\n        FGT0      FGT1      FGT2\n       &lt;num&gt;     &lt;num&gt;     &lt;num&gt;\n1: 0.5855476 0.3394363 0.2319952\n\n\n\n\ninterpretation\n#’ FGT0: 54% of the pop in poverty #’ FGT1: the accessibility of the poor is on average 33% lower than the poverty line #’ FGT2:"
  },
  {
    "objectID": "3_flexible_approach.html",
    "href": "3_flexible_approach.html",
    "title": "Flexible",
    "section": "",
    "text": "test parte1\n\n# allocating memory to java\noptions(java.parameters = \"-Xmx6G\")\n\nlibrary(r5r)\nlibrary(accessibility)\nlibrary(sf)\nlibrary(ggplot2)\nlibrary(h3jsr)\nlibrary(dplyr)\n\nlibrary(mapview)\n\ndir\n\n# dir with data\ndata_path &lt;- system.file(\"extdata/poa\", package = \"r5r\")\n\n# data_path &lt;- 'C:://user/my_data'\n\nlist.files(data_path)\n\nbrowseURL(data_path)\n\n\nbuild network\n\nr5r_core &lt;- setup_r5(data_path)\n\n\nr5r_core\n\n\n\nexplore data\n\n# read all points in the city\npoints &lt;- read.csv(file.path(data_path, \"poa_hexgrid.csv\"))\n\nhead(points)\n\n\n# retrieve polygons of H3 spatial grid\ngrid &lt;- h3jsr::cell_to_polygon(points$id, simple = FALSE)\n\nhead(grid)\n\n\n\n# merge land use data with spatial grid\ngrid_poa &lt;- dplyr::left_join(grid, \n                             points, \n                             by = c('h3_address'='id'))\n\n\n\n# interactive map\nmapview(grid_poa, zcol = 'jobs')\n\n\n\nAccessibility: flexible approach\n\n# routing inputs\nmode &lt;- c(\"walk\", \"transit\")\nmax_walk_time &lt;- 30      # in minutes\ntravel_time_cutoff &lt;- 20 # in minutes\ntime_window &lt;- 30        # in minutes\ndeparture_datetime &lt;- as.POSIXct(\"13-05-2019 14:00:00\",\n                                 format = \"%d-%m-%Y %H:%M:%S\")\n\n\n# Travel time matrix\n# calculate travel time matrix\nttm &lt;- r5r::travel_time_matrix(r5r_core,\n                               origins = points,\n                               destinations = points,\n                               mode = mode,\n                               departure_datetime = departure_datetime,\n                               max_walk_time = max_walk_time, \n                               max_trip_duration = 60,\n                               time_window = time_window,\n                               progress = TRUE\n                               )\nhead(ttm)\n\n\n\n\n\n\n\n# Now we can use the {accessibility} !\n\n# cumulative accessibility\ncum_access_jobs &lt;- accessibility::cumulative_cutoff(\n                                                    travel_matrix = ttm, \n                                                    travel_cost = 'travel_time_p50',\n                                                    \n                                                    land_use_data = points,\n                                                    opportunity = 'jobs',\n                                                    cutoff = 30\n                                                    )\n\nhead(cum_access_jobs)\n\n\n\n\n# Interval-based cumulative opportunities\ncum_interval &lt;- accessibility::cumulative_interval(\n                                    travel_matrix = ttm,\n                                    land_use_data = points,\n                                    opportunity = \"jobs\",\n                                    travel_cost = \"travel_time_p50\",\n                                    interval = c(20, 40)\n                                  )\n\nhead(cum_interval)\n\n\n# gravity-based access\nexp_access_jobs &lt;- accessibility::gravity(\n                                          travel_matrix = ttm,\n                                          land_use_data = points,\n                                          opportunity = \"schools\",\n                                          travel_cost = \"travel_time_p50\",\n                                          decay_function = decay_exponential(decay_value = 0.8)\n                                          )\n  \n  \nhead(exp_access_jobs)\n\n\n\n\n# Accessibility analyses  -------------------------------------------\n\n\n# spatial distribution\n\n# merge accessibility estimates\naccess_sf &lt;- left_join(grid, cum_access_jobs, by = c('h3_address'='id'))\n\ntest\n\n# plot\nggplot() +\n  geom_sf(data = access_sf, aes(fill = jobs), color= NA) +\n  scale_fill_viridis_c(direction = -1, option = 'B') +\n  labs(fill = \"Number of\\nfacilities within\\n20 minutes\") +\n  theme_minimal() +\n  theme(axis.title = element_blank()) +\n#  facet_wrap(~opportunity) +\n  theme_void()\n\n\n\ninteractive map\n\naccess_sf |&gt;\n#  filter(opportunity == 'jobs') |&gt;\n  mapview(zcol = 'jobs')\n\n\n\n\ntransit &lt;- r5r::transit_network_to_sf(r5r_core)\n\n\nstops &lt;- transit$stops\n\nrouts &lt;- transit$routes\n\n\nmapview(routs) + stops\n\ns",
    "crumbs": [
      "Calculating accessibility",
      "Flexible"
    ]
  },
  {
    "objectID": "4_equity_measures.knit.html",
    "href": "4_equity_measures.knit.html",
    "title": "access_workshop_WSTLUR_2024",
    "section": "",
    "text": "test parte2\n\n\nPlease make sure you have already allocated some memory to Java by running:\n  options(java.parameters = '-Xmx2G').\nYou should replace '2G' by the amount of memory you'll require. Currently, Java memory is set to -Xmx6G\n\n\n\nAccessibility inequality & poverty ——————————————-\n\n\n                id  jobs\n            &lt;char&gt; &lt;int&gt;\n1: 89a881a5a2bffff 14561\n2: 89a881a5a2fffff 29452\n3: 89a881a5a67ffff 16647\n4: 89a881a5a6bffff 10700\n5: 89a881a5a6fffff  6669\n6: 89a881a5b03ffff 37029\n\n\n\n\nAccessibility inequality ——————————————-\n\n\n   palma_ratio\n         &lt;num&gt;\n1:    3.800465\n\n\n   gini_index\n        &lt;num&gt;\n1:  0.4715251\n\n\n\n\nAccessibility poverty ——————————————-\n\n\n        FGT0      FGT1      FGT2\n       &lt;num&gt;     &lt;num&gt;     &lt;num&gt;\n1: 0.5855476 0.3394363 0.2319952\n\n\n\n\ninterpretation\n#’ FGT0: 54% of the pop in poverty #’ FGT1: the accessibility of the poor is on average 33% lower than the poverty line #’ FGT2:"
  },
  {
    "objectID": "3_flexible_approach.knit.html",
    "href": "3_flexible_approach.knit.html",
    "title": "access_workshop_WSTLUR_2024",
    "section": "",
    "text": "test parte1\n\n# allocating memory to java\noptions(java.parameters = \"-Xmx6G\")\n\nlibrary(r5r)\nlibrary(accessibility)\nlibrary(sf)\nlibrary(data.table)\nlibrary(ggplot2)\nlibrary(h3jsr)\nlibrary(dplyr)\n\nlibrary(mapview)\n\ndir\n\n# dir with data\ndata_path &lt;- system.file(\"extdata/poa\", package = \"r5r\")\n\n# data_path &lt;- 'C:://user/my_data'\n\nlist.files(data_path)\n\nbrowseURL(data_path)\n\n\nbuild network\n\nr5r_core &lt;- setup_r5(data_path)\n\n\nr5r_core\n\n\n\nexplore data\n\n# read all points in the city\npoints &lt;- fread(file.path(data_path, \"poa_hexgrid.csv\"))\n\nhead(points)\n\n\n# retrieve polygons of H3 spatial grid\ngrid &lt;- h3jsr::cell_to_polygon(points$id, simple = FALSE)\n\nhead(grid)\n\n\n\n# merge land use data with spatial grid\ngrid_poa &lt;- dplyr::left_join(grid, \n                             points, \n                             by = c('h3_address'='id'))\n\n\n\n# interactive map\nmapview(grid_poa, zcol = 'jobs')\n\n\n\nAccessibility: flexible approach\n\n# routing inputs\nmode &lt;- c(\"walk\", \"transit\")\nmax_walk_time &lt;- 30      # in minutes\ntravel_time_cutoff &lt;- 20 # in minutes\ntime_window &lt;- 30        # in minutes\ndeparture_datetime &lt;- as.POSIXct(\"13-05-2019 14:00:00\",\n                                 format = \"%d-%m-%Y %H:%M:%S\")\n\n\n# Travel time matrix\n# calculate travel time matrix\nttm &lt;- r5r::travel_time_matrix(r5r_core,\n                               origins = points,\n                               destinations = points,\n                               mode = mode,\n                               departure_datetime = departure_datetime,\n                               max_walk_time = max_walk_time, \n                               max_trip_duration = 60,\n                               time_window = time_window,\n                               progress = TRUE\n                               )\nhead(ttm)\n\n\n\n\n\n\n\n# Now we can use the {accessibility} !\n\n# cumulative accessibility\ncum_access_jobs &lt;- accessibility::cumulative_cutoff(\n                                                    travel_matrix = ttm, \n                                                    travel_cost = 'travel_time_p50',\n                                                    \n                                                    land_use_data = points,\n                                                    opportunity = 'jobs',\n                                                    cutoff = 30\n                                                    )\n\nhead(cum_access_jobs)\n\n\n\n\n# Interval-based cumulative opportunities\ncum_interval &lt;- accessibility::cumulative_interval(\n                                    travel_matrix = ttm,\n                                    land_use_data = points,\n                                    opportunity = \"jobs\",\n                                    travel_cost = \"travel_time_p50\",\n                                    interval = c(20, 40)\n                                  )\n\nhead(cum_interval)\n\n\n# gravity-based access\nexp_access_jobs &lt;- accessibility::gravity(\n                                          travel_matrix = ttm,\n                                          land_use_data = points,\n                                          opportunity = \"schools\",\n                                          travel_cost = \"travel_time_p50\",\n                                          decay_function = decay_exponential(decay_value = 0.8)\n                                          )\n  \n  \nhead(exp_access_jobs)\n\n\n\n\n# Accessibility analyses  -------------------------------------------\n\n\n# spatial distribution\n\n# merge accessibility estimates\naccess_sf &lt;- left_join(grid, cum_access_jobs, by = c('h3_address'='id'))\n\ntest\n\n# plot\nggplot() +\n  geom_sf(data = access_sf, aes(fill = jobs), color= NA) +\n  scale_fill_viridis_c(direction = -1, option = 'B') +\n  labs(fill = \"Number of\\nfacilities within\\n20 minutes\") +\n  theme_minimal() +\n  theme(axis.title = element_blank()) +\n#  facet_wrap(~opportunity) +\n  theme_void()\n\n\n\ninteractive map\n\naccess_sf |&gt;\n#  filter(opportunity == 'jobs') |&gt;\n  mapview(zcol = 'jobs')\n\n\n\n\ntransit &lt;- r5r::transit_network_to_sf(r5r_core)\n\n\nstops &lt;- transit$stops\n\nrouts &lt;- transit$routes\n\n\nmapview(routs) + stops\n\ns"
  },
  {
    "objectID": "1_installation.html",
    "href": "1_installation.html",
    "title": "Installation",
    "section": "",
    "text": "To follow the workshop, you should have the following programs installed on your machine before the day of the workshop. - R and RStudio - A few R packages - Java JDK 21\nSee instrucions below:\n\n\n\n\nInstalling R and RStudio\nWe assume you already have R and RStudio installed in your machine. In case you don’t, follow these simple instructions here.\n\n\nInstalling R packages\nThe workshop uses a few R packages that need to be installed in your machine. The simplest way to do this is running the code below. This might take a few minutes if this is the first time you install these packages.\n\npkgs_to_install &lt;- c('r5r',\n                     'accessibility',\n                     'ggplot2',\n                     'mapview',\n                     'dplyr',\n                     'h3jsr',\n                     'sf'\n                     )\n\ninstall.packages(pkgs_to_install)\n\nThe safest way to replicate the code of this workshop, though, is cloning its repository locally. This is because this repository uses the {renv} R package to manage the workshop dependencies, which is important to make sure we are using the intended versions of the packages dependencies.\nOnce you have cloned the repo and you’ve opened the access_workshop_bogota_2024.Rproj file, you can simply run renv::restore() to install all the package dependencies used in this workshop.\n\n# uncomment the line below in case you need to install the {renv} package\n# install.packages('renv')\nrenv::restore()\n\n\n\nInstalling Java JDK\nTo use the {r5r} package (version v2.0 or higher), you will need to have Java Development Kit (JDK) 21 installed on your computer. There are numerous open-source JDK implementations. The easiest way to install JDK is using the new {rJavaEnv} package in R, developed by Egor Kotov (thanks Egor!)\n\n# install dev version of {rJavaEnv}\nremotes::install_github(\"e-kotov/rJavaEnv\")\n\n# install JDK 21\nrJavaEnv::java_quick_install(version = 21,\n                             distribution = 'Corretto')\n\nAlternatively, you can manually download and install any of these options:\n\nAdoptium/Eclipse Temurin\nAmazon Corretto\nOracle OpenJDK",
    "crumbs": [
      "Getting started",
      "Installation"
    ]
  },
  {
    "objectID": "2_quick_approach.html",
    "href": "2_quick_approach.html",
    "title": "Quick approach",
    "section": "",
    "text": "These data sets should be saved in a single directory, which should preferably not contain any other files. As we will see below, {r5r} combines all the data saved in this directory to create a multimodal transport network that is used for routing trips between origin-destination pairs and, consequently, for calculating travel time matrices. Please note that you can have more than one GTFS file in the same directory, in which case {r5r} considers the public transport networks of all feeds together. The street network and the topography of the study area, however, must be each one described by a single file. Assuming that R scripts are saved in a directory called R, a possible file structure is shown below:\n\n# allocating memory to java\noptions(java.parameters = \"-Xmx6G\")\n\nlibrary(r5r)\nlibrary(accessibility)\nlibrary(sf)\nlibrary(ggplot2)\nlibrary(h3jsr)\nlibrary(dplyr)\n\nlibrary(mapview)\n\ndir\n\n# dir with data\ndata_path &lt;- system.file(\"extdata/poa\", package = \"r5r\")\n\n# data_path &lt;- 'C:://user/my_data'\n\nlist.files(data_path)\n\nbrowseURL(data_path)\n\n\nbuild network\n\nr5r_core &lt;- setup_r5(data_path)\n\n\nr5r_core\n\n\n\nexplore data\n\n# read all points in the city\npoints &lt;- data.table::fread(file.path(data_path, \"poa_hexgrid.csv\"))\n\nhead(points)\n\n\n# retrieve polygons of H3 spatial grid\ngrid &lt;- h3jsr::cell_to_polygon(points$id, simple = FALSE)\n\nhead(grid)\n\n\n\n# merge land use data with spatial grid\ngrid_poa &lt;- dplyr::left_join(grid, \n                             points, \n                             by = c('h3_address'='id'))\n\n\n\n# interactive map\nmapview(grid_poa, zcol = 'jobs')\n\n\n\nAccess: quick and easy\n\n# routing inputs\nmode &lt;- c(\"walk\", \"transit\")\nmax_walk_time &lt;- 30      # in minutes\ntravel_time_cutoff &lt;- 20 # in minutes\ntime_window &lt;- 30        # in minutes\ndeparture_datetime &lt;- as.POSIXct(\"13-05-2019 14:00:00\",\n                                 format = \"%d-%m-%Y %H:%M:%S\")\n\n\n\n\n\n# calculate accessibility\naccess1 &lt;- r5r::accessibility(r5r_core,\n                              origins = points,\n                              destinations = points, \n                              mode = mode,\n                              opportunities_colnames = c(\"jobs\", \"schools\"),\n                              decay_function = \"step\",\n                              cutoffs = travel_time_cutoff,\n                              departure_datetime = departure_datetime,\n                              max_walk_time = max_walk_time,\n                              time_window = time_window,\n\n                              progress = TRUE\n                              )\n\nhead(access1)\n\ns",
    "crumbs": [
      "Calculating accessibility",
      "Quick approach"
    ]
  },
  {
    "objectID": "0_about.html",
    "href": "0_about.html",
    "title": "About tests",
    "section": "",
    "text": "A crash course on urban accessibility with R\nmobilidade (Banister 2011; vasconcellos2018urban?; Levinson and King 2020). Ainda hoje, o foco na mobilidade motiva políticas que priorizam a circulação de automóveis e visam aumentar a velocidade e a fluidez de trânsito para reduzir congestionamentos e, consequentemente, tempos de deslocamento (Levine, Grengs, and Merlin 2019). Essas políticas, no entanto, tendem a dar um enfoque quantitativo na mobilidade: aumentar o número de viagens, aumentar a velocidade média, diminuir o tempo de congestionamento etc.\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n\n\nReferences\n\nBanister, David. 2011. “The Trilogy of Distance, Speed and Time.” Journal of Transport Geography 19 (4): 950–59. https://doi.org/10.1016/j.jtrangeo.2010.12.004.\n\n\nLevine, Jonathan, Joe Grengs, and Louis A. Merlin. 2019. From Mobility to Accessibility: Transforming Urban Transportation and Land-Use Planning. Cornell University Press.\n\n\nLevinson, David, and David King. 2020. Transport Access Manual: A Guide for Measuring Connection Between People and Places. Committee of the Transport Access Manual, University of Sydney."
  },
  {
    "objectID": "5_slides.html",
    "href": "5_slides.html",
    "title": "Slides",
    "section": "",
    "text": "Part 1\nPart 1\n\n\n\n\n\nPart 2\nPart 2\n\n\nPart 3\nPart 3\n\n\n\nPart 4\nPart 4\n\n    It appears you don't have a PDF plugin for this browser.\n    No biggie... you can click here to\n    download the PDF file.\n\n5",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "1_installation.knit.html",
    "href": "1_installation.knit.html",
    "title": "Installation",
    "section": "",
    "text": "To follow the workshop, you should have the following programs installed on your machine before the day of the workshop. - R and RStudio - A few R packages - Java JDK 21\n\n\n\n\nInstalling R and RStudio\nWe assume you already have R and RStudio installed in your machine. If you don’t, follow these simple instructions here.\n\n\nInstalling R packages\nThe workshop uses a few R packages that need to be installed in your machine. The simplest way to do this is running the code below. This might take a few minutes if this is the first time you install these packages.\n\npkgs_to_install &lt;- c('r5r',\n                     'accessibility',\n                     'ggplot2',\n                     'mapview',\n                     'dplyr',\n                     'h3jsr',\n                     'sf'\n                     )\n\ninstall.packages(pkgs_to_install)\n\nThe safest way to replicate the code of this workshop, though, is cloning its repository locally. This is because this repository uses the {renv} R package to manage the workshop dependencies, which is important to make sure we are using the intended versions of the packages dependencies.\nOnce you have cloned the repo and you’ve opened the access_workshop_bogota_2024.Rproj file, you can simply run renv::restore() to install all the package dependencies used in this workshop.\n\n# uncomment the line below in case you need to install the {renv} package\n# install.packages('renv')\nrenv::restore()\n\n\n\nInstalling Java JDK\nTo use the {r5r} package (version v2.0 or higher), you will need to have Java Development Kit (JDK) 21 installed on your computer. There are numerous open-source JDK implementations. The easiest way to install JDK is using the new {rJavaEnv} package in R, developed by Egor Kotov (thanks Egor!)\n\n# install dev version of {rJavaEnv}\ndevtools::install_github(\"e-kotov/rJavaEnv\")\n\n# install JDK 21\nrJavaEnv::java_quick_install(version = 21,\n                             distribution = 'Corretto')\n\nAlternatively, you can manually download and install any of these options:\n\nAdoptium/Eclipse Temurin\nAmazon Corretto\nOracle OpenJDK"
  },
  {
    "objectID": "1.2_data_requirements.html",
    "href": "1.2_data_requirements.html",
    "title": "Data requirements",
    "section": "",
    "text": "In order to conduct transport routing and accessibility analysis using the {r5r} package, you will need a few input data sets:\n\nA road network from OpenStreetMap in .pbfformat (mandatory)\nA public transport feed inGTFS.zip format (optional)\nA raster file with Digital Elevation Model data in .tif format (optional)\nSome data on the spatial distribution of population and/or activities such as employment, schools, health care facilities.\n\nAll the data we’ll use in this workhop is provided with the code exercises. However, here is where you can download these data sets for other places. See also slides below.\n\nStreet network (mandatory):\n\n{osmextract}, R package;\nGeofabrik, website;\nHOT Export Tool, website;\nBBBike Extract Service, website.\nProtomaps website\n\nPublic transport network (optional):\n\n{tidytransit}, R package;\nTransitland, website;\nMobility Database website\n\nTopography (optional):\n\n{elevatr}, R package;\nNasa’s SRTMGL1, website.",
    "crumbs": [
      "Getting started",
      "Data requirements"
    ]
  },
  {
    "objectID": "1.1_installation.html",
    "href": "1.1_installation.html",
    "title": "Installation",
    "section": "",
    "text": "A few slides explaining the computational requirements to conduct transport routing and accessibility analysis with R in general:\n\n\n\n\n\n\n\n\n\nTo follow the workshop, you should have the following programs installed on your machine before the day of the workshop. - R and RStudio - A few R packages - Java JDK 21\nSee instrucions below:\n\n\n\n\nInstalling R and RStudio\nWe assume you already have R and RStudio installed in your machine. In case you don’t, follow these simple instructions here.\n\n\nInstalling R packages\nThe workshop uses a few R packages that need to be installed in your machine. The simplest way to do this is running the code below. This might take a few minutes if this is the first time you install these packages.\n\npkgs_to_install &lt;- c('r5r',\n                     'accessibility',\n                     'ggplot2',\n                     'mapview',\n                     'dplyr',\n                     'h3jsr',\n                     'sf'\n                     )\n\ninstall.packages(pkgs_to_install)\n\nThe safest way to replicate the code of this workshop, though, is cloning its repository locally. This is because this repository uses the {renv} R package to manage the workshop dependencies, which is important to make sure we are using the intended versions of the packages dependencies.\nOnce you have cloned the repo and you’ve opened the access_workshop_bogota_2024.Rproj file, you can simply run renv::restore() to install all the package dependencies used in this workshop.\n\n# uncomment the line below in case you need to install the {renv} package\n# install.packages('renv')\nrenv::restore()\n\n\n\nInstalling Java JDK\nTo use the {r5r} package (version v2.0 or higher), you will need to have Java Development Kit (JDK) 21 installed on your computer. There are numerous open-source JDK implementations. The easiest way to install JDK is using the new {rJavaEnv} package in R, developed by Egor Kotov (thanks Egor!)\n\n# install dev version of {rJavaEnv}\nremotes::install_github(\"e-kotov/rJavaEnv\")\n\n# install JDK 21\nrJavaEnv::java_quick_install(version = 21,\n                             distribution = 'Corretto')\n\nAlternatively, you can manually download and install any of these options:\n\nAdoptium/Eclipse Temurin\nAmazon Corretto\nOracle OpenJDK",
    "crumbs": [
      "Getting started",
      "Installation"
    ]
  }
]