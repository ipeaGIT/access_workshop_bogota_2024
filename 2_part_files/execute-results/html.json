{
  "hash": "edb53bee856759660ea53b33f86f319c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"access_workshop_WSTLUR_2024\"\n---\n\n\n\n\ntest `parte2`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# allocating memory to java\noptions(java.parameters = \"-Xmx6G\")\n\nlibrary(r5r)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nPlease make sure you have already allocated some memory to Java by running:\n  options(java.parameters = '-Xmx2G').\nYou should replace '2G' by the amount of memory you'll require. Currently, Java memory is set to -Xmx6G\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(accessibility)\nlibrary(ggplot2)\n```\n:::\n\n\n\n\n# Accessibility inequality & poverty  -------------------------------------------\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# get data\n\nlibrary(accessibility)\n\n# path to data\ndata_dir <- system.file(\"extdata\", package = \"accessibility\")\n\ntravel_matrix <- readRDS(file.path(data_dir, \"travel_matrix.rds\"))\nland_use_data <- readRDS(file.path(data_dir, \"land_use_data.rds\"))\n\n\n# calculate access\naccess <- cumulative_cutoff(  travel_matrix,\n                              land_use_data,\n                              opportunity = \"jobs\",\n                              travel_cost = \"travel_time\",\n                              cutoff = 30\n                            )\n\nhead(access)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                id  jobs\n            <char> <int>\n1: 89a881a5a2bffff 14561\n2: 89a881a5a2fffff 29452\n3: 89a881a5a67ffff 16647\n4: 89a881a5a6bffff 10700\n5: 89a881a5a6fffff  6669\n6: 89a881a5b03ffff 37029\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n# Accessibility inequality  -------------------------------------------\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#\n# Palma = (avereage) Top 10%  / botton 40%\n\npalma <- palma_ratio(\n                      accessibility_data = access,\n                      sociodemographic_data = land_use_data,\n                      opportunity = \"jobs\",\n                      population = \"population\",\n                      income = \"income_per_capita\"\n                    )\n\npalma\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   palma_ratio\n         <num>\n1:    3.800465\n```\n\n\n:::\n\n```{.r .cell-code}\n# concentration index\n\nci <- accessibility::gini_index(\n                          accessibility_data = access,\n                          sociodemographic_data = land_use_data,\n                          opportunity = \"jobs\",\n                          population = \"population\"\n                          #,\n                         # income = \"income_per_capita\"\n                          # , type = \"corrected\"\n                        )\n\nci\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   gini_index\n        <num>\n1:  0.4715251\n```\n\n\n:::\n:::\n\n\n\n\n# Accessibility poverty  -------------------------------------------\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npoverty <- fgt_poverty(\n                          accessibility_data =  access,\n                          sociodemographic_data = land_use_data,\n                          opportunity = \"jobs\",\n                          population = \"population\",\n                          poverty_line = 100000\n                        )\n\n\npoverty\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n        FGT0      FGT1      FGT2\n       <num>     <num>     <num>\n1: 0.5855476 0.3394363 0.2319952\n```\n\n\n:::\n:::\n\n\n\n\n\n\n# interpretation\n\n#' FGT0: 54% of the pop in poverty\n#' FGT1: the accessibility of the poor is on average 33% lower than the poverty line\n#' FGT2: \n",
    "supporting": [
      "2_part_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}